{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Login</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Poppins", sans-serif;
    }

    body {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      background:rgb(243, 211, 172);
      overflow: hidden;
      position: relative;
    }

    /* Coffee Beans Background Animation */
    .coffee-beans-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      overflow: hidden;
    }

    .coffee-bean {
      position: absolute;
      background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="%2363411E" d="M50,20 C70,10 80,30 70,50 C80,70 70,90 50,80 C30,90 20,70 30,50 C20,30 30,10 50,20 Z"/></svg>') no-repeat;
      background-size: contain;
      opacity: 0.3;
      animation: float 15s infinite linear;
    }

    @keyframes float {
      0% {
        transform: translateY(0) translateX(0);
        opacity: 0;
      }
      10% {
        opacity: 0.3;
      }
      90% {
        opacity: 0.3;
      }
      100% {
        transform: translateY(-1000px) translateX(1000px);
        opacity: 0;
      }
    }

    /* Coffee Steam Effect */
    .coffee-steam {
      position: fixed;
      width: 200%;
      height: 200%;
      top: -50%;
      left: -50%;
      background: radial-gradient(ellipse at center, 
        rgba(210, 180, 140, 0.1) 0%, 
        rgba(0, 0, 0, 0) 70%);
      z-index: -1;
      animation: rotate 120s linear infinite;
    }

    .coffee-steam::before, .coffee-steam::after {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      background: radial-gradient(ellipse at center, 
        rgba(210, 180, 140, 0.08) 0%, 
        rgba(0, 0, 0, 0) 60%);
      border-radius: 50%;
    }

    .coffee-steam::before {
      transform: rotate(60deg);
      animation: pulse 30s infinite alternate;
    }

    .coffee-steam::after {
      transform: rotate(120deg);
      animation: pulse 45s infinite alternate-reverse;
    }

    @keyframes rotate {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    @keyframes pulse {
      0% { opacity: 0.3; transform: scale(0.8) rotate(60deg); }
      50% { opacity: 0.6; transform: scale(1.2) rotate(60deg); }
      100% { opacity: 0.3; transform: scale(0.8) rotate(60deg); }
    }

    /* Message Alert Styling */
    .custom-alert {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1000;
      background: rgba(255, 253, 250, 0.9);
      border: 1px solid rgba(99, 65, 30, 0.5);
      color:rgb(147, 112, 76);
      border-radius: 8px;
      padding: 15px;
      backdrop-filter: blur(10px);
      max-width: 400px;
      display: flex;
      align-items: center;
      animation: slideIn 0.5s forwards;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    .custom-alert i {
      margin-right: 10px;
      font-size: 20px;
    }

    .custom-alert-success {
      border-color: rgba(131, 90, 49, 0.5);
    }

    .custom-alert-success i {
      color: #63411E;
    }

    .custom-alert-danger {
      border-color: rgba(220, 53, 69, 0.5);
    }

    .custom-alert-danger i {
      color: #dc3545;
    }

    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    /* Glowing Border Animation */
    @keyframes border-glow {
      0% { box-shadow: 0 0 10px rgba(210, 180, 140, 0.3); }
      50% { box-shadow: 0 0 30px rgba(210, 180, 140, 0.6); }
      100% { box-shadow: 0 0 10px rgba(210, 180, 140, 0.3); }
    }

    .container {
      position: relative;
      width: 850px;
      height: 550px;
      background: rgba(255, 253, 250, 0.9);
      border-radius: 30px;
      margin: 20px;
      overflow: hidden;
      border: 1px solid rgba(99, 65, 30, 0.3);
      backdrop-filter: blur(10px);
      animation: border-glow 8s infinite;
      transition: all 0.5s;
    }

    .container:hover {
      box-shadow: 0 0 40px rgba(210, 180, 140, 0.4);
    }

    /* Logo Container */
    .logo-container {
      position: absolute;
      top: 20px;
      left: 20px;
      z-index: 10;
      display: flex;
      align-items: center;
    }

    .logo-img {
      width: 50px;
      height: 50px;
      margin-right: 10px;
      background-color: #63411E;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #FFFDFA;
      font-size: 24px;
      font-weight: bold;
    }

    .logo-text {
      color: #63411E;
      font-weight: 700;
      font-size: 24px;
    }

    .form-box {
      position: absolute;
      right: 0;
      width: 50%;
      height: 100%;
      background: rgba(255, 253, 250, 0.95);
      display: flex;
      align-items: center;
      color: #63411E;
      text-align: center;
      padding: 40px;
      z-index: 1;
      transition: 0.6s ease-in-out 1.2s, visibility 0s 1s;
      backdrop-filter: blur(5px);
    }

    .container.active .form-box {
      right: 50%;
    }

    .form-box.register {
      visibility: hidden;
    }

    .container.active .form-box.register {
      visibility: visible;
    }

    form {
      width: 100%;
    }

    .container h1 {
      font-size: 36px;
      margin: 10px 0;
      color:rgb(46, 16, 0);
      text-transform: capitalize;
    }

    .input-box {
      position: relative;
      margin: 30px 0;
    }

    .input-box input {
      width: 100%;
      padding: 13px 50px 13px 20px;
      background: rgba(255, 253, 250, 0.7);
      border-radius: 8px;
      border: 1px solid rgba(99, 65, 30, 0.3);
      outline: none;
      font-size: 16px;
      color: #63411E;
      font-weight: 500;
      transition: all 0.3s;
    }

    .input-box input:focus {
      border-color: #63411E;
      box-shadow: 0 0 10px rgba(99, 65, 30, 0.3);
      transform: translateY(-2px);
    }

    .input-box input::placeholder {
      color:rgb(102, 71, 36);
      font-weight: 400;
    }

    .input-box i {
      position: absolute;
      right: 20px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 20px;
      color:rgb(41, 25, 10);
    }

    .forgot-link {
      margin: -15px 0 15px;
      text-align: right;
    }

    .forgot-link a {
      font-size: 14.5px;
      color:rgb(92, 54, 16);
      text-decoration: none;
      transition: all 0.3s;
    }

    .forgot-link a:hover {
      text-decoration: underline;
    }

    .btn {
      width: 100%;
      height: 48px;
      background: linear-gradient(135deg,rgb(131, 90, 49),rgb(144, 84, 28));
      box-shadow: 0 0 10px rgba(163, 120, 76, 0.3);
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-size: 16px;
      color: #FFFDFA;
      font-weight: 600;
      transition: all 0.3s;
      position: relative;
      overflow: hidden;
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: 0.5s;
    }

    .btn:hover::before {
      left: 100%;
    }

    .btn:hover {
      background: linear-gradient(135deg,rgb(131, 90, 49),rgb(144, 84, 28));
      box-shadow: 0 0 20px rgba(99, 65, 30, 0.5);
      transform: translateY(-3px);
    }

    .container p {
      font-size: 14.5px;
      margin: 15px 0;
      color: #a08669;
    }

    .social-icons {
      display: flex;
      justify-content: center;
      gap: 15px;
    }

    .social-icons a {
      display: inline-flex;
      padding: 10px;
      border: 2px solid #d2b48c;
      border-radius: 8px;
      font-size: 20px;
      color:rgb(0, 0, 0);
      text-decoration: none;
      transition: all 0.3s;
    }

    .social-icons a:hover {
      background: rgba(99, 65, 30, 0.1);
      border-color:rgb(60, 35, 10);
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(49, 30, 12, 0.1);
    }

    .toggle-box {
      position: absolute;
      width: 100%;
      height: 100%;
    }

    .toggle-box::before {
      content: "";
      position: absolute;
      left: -250%;
      width: 300%;
      height: 100%;
      background: linear-gradient(135deg,rgb(131, 90, 49),rgb(130, 75, 25));
      border-radius: 150px;
      z-index: 2;
      transition: 1.8s ease-in-out;
    }

    .container.active .toggle-box::before {
      left: 50%;
    }

    .toggle-panel {
      position: absolute;
      width: 50%;
      height: 100%;
      color:rgb(246, 218, 177);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 0 40px;
      text-align: center;
      z-index: 2;
    }

    .toggle-panel h1 {
      font-size: 36px;
      margin-bottom: 20px;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    }

    .toggle-panel p {
      margin-bottom: 20px;
      color: #FFFDFA;
    }

    .toggle-panel.toggle-left {
      left: 0;
      transition-delay: 1.2s;
    }

    .container.active .toggle-panel.toggle-left {
      left: -50%;
      transition-delay: 0.6s;
    }

    .toggle-panel.toggle-right {
      right: -50%;
      transition-delay: 0.6s;
    }

    .container.active .toggle-panel.toggle-right {
      right: 0;
      transition-delay: 1.2s;
    }

    .toggle-panel .btn {
      width: 160px;
      height: 46px;
      background: transparent;
      border: 2px solid #FFFDFA;
      box-shadow: none;
    }

    .toggle-panel .btn:hover {
      background: rgba(184, 61, 61, 0.1);
      transform: translateY(-3px);
    }

    @media screen and (max-width: 650px) {
      .container {
        height: calc(100vh - 40px);
      }

      .form-box {
        bottom: 0;
        width: 100%;
        height: 70%;
      }

      .container.active .form-box {
        right: 0;
        bottom: 30%;
      }

      .toggle-box::before {
        left: 0;
        top: -270%;
        width: 100%;
        height: 300%;
      }

      .container.active .toggle-box::before {
        left: 0;
        top: 70%;
      }

      .toggle-panel {
        width: 100%;
        height: 30%;
      }

      .toggle-panel.toggle-left {
        top: 0;
      }

      .container.active .toggle-panel.toggle-left {
        left: 0;
        top: -30%;
      }

      .toggle-panel.toggle-right {
        right: 0;
        bottom: -30%;
      }

      .container.active .toggle-panel.toggle-right {
        bottom: 0;
      }
    }

    @media screen and (max-width: 450px) {
      .form-box {
        padding: 20px;
      }

      .toggle-panel h1 {
        font-size: 30px;
      }
      
      .logo-container {
        top: 10px;
        left: 10px;
      }
      
      .logo-img {
        width: 40px;
        height: 40px;
        font-size: 20px;
      }
      
      .logo-text {
        font-size: 20px;
      }
    }

  </style>
</head>
<body>



  <!-- Coffee Beans Background Animation -->
  <div class="coffee-beans-bg" id="coffeeBeansBg"></div>
  <div class="coffee-steam"></div>

  <!-- Message Alerts -->
  {% if messages or error %}
  <div class="custom-alert custom-alert-{% if error %}danger{% else %}{{ message.tags }}{% endif %} alert-dismissible fade show" 
       role="alert" id="messageAlert">
    {% if error %}
      <i class='bx bxs-error-circle me-2'></i>
      Invalid username or password
    {% else %}
      {% for message in messages %}
        <i class='bx {% if message.tags == 'success' %}bxs-check-circle{% else %}bxs-error-circle{% endif %} me-2'></i>
        {{ message }}
      {% endfor %}
    {% endif %}
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>
  <script>
    setTimeout(() => {
      const alert = document.getElementById('messageAlert');
      if (alert) {
        alert.classList.remove('show');
        alert.classList.add('fade');
        setTimeout(() => alert.remove(), 300);
      }
    }, 2000);
  </script>
  {% endif %}

  <div class="container">
    <!-- Login Form -->
        <div class="form-box login">
          <form method="POST" action="{% url 'login' %}">
            {% csrf_token %}
            <div class="logo-container">
              <div class="logo-img" ><img src="{% static 'templates/img/Coffee (2).png' %}" alt="Logo" style="max-height: 150px; width: auto align: right;"></div>
              <div class="logo-text"></div>
            </div>
            <h1>Login</h1>
        <p>Welcome back! Please login to your account.</p>
        <div class="input-box">
          <input type="text" name="username" placeholder="Username or Email" required>
          <i class='bx bxs-user'></i>
        </div>
        <div class="input-box">
          <input type="password" name="password" id="password" placeholder="Password" required>
          <i class='bx bxs-lock-alt toggle-password'></i>
        </div>
        <div class="forgot-link">
          <a href="#">Forgot password?</a>
        </div>
        <button type="submit" class="btn">Login</button>
        <p>or login with social platforms</p>
        <div class="social-icons">
          <a href="#"><i class='bx bxl-google'></i></a>
          <a href="#"><i class='bx bxl-facebook'></i></a>
          <a href="#"><i class='bx bxl-github'></i></a>
          <a href="#"><i class='bx bxl-linkedin'></i></a>
        </div>
      </form>
    </div>

    <!-- Register Form -->
    <div class="form-box register">
      <form method="POST" action="{% url 'register' %}">
        {% csrf_token %}
        <div class="logo-container">
              <div class="logo-img" ><img src="{% static 'templates/img/Coffee (2).png' %}" alt="Logo" style="max-height: 150px; width: auto align: right;"></div>
              <div class="logo-text"></div>
            </div>
        <h1>Register</h1>
        <div class="input-box">
          <input type="text" name="username" placeholder="Username" required>
          <i class='bx bxs-user'></i>
        </div>
        <div class="input-box">
          <input type="email" name="email" placeholder="Email" required>
          <i class='bx bxs-envelope'></i>
        </div>
        <div class="input-box">
          <input type="password" name="password" id="reg-password" placeholder="Password" required>
          <i class='bx bxs-lock-alt toggle-password'></i>
        </div>
        <button type="submit" class="btn">Register</button>
        <p>or register with social platforms</p>
        <div class="social-icons">
          <a href="#"><i class='bx bxl-google'></i></a>
          <a href="#"><i class='bx bxl-facebook'></i></a>
          <a href="#"><i class='bx bxl-github'></i></a>
          <a href="#"><i class='bx bxl-linkedin'></i></a>
        </div>
      </form>
    </div>

    <!-- Toggle Panel -->
    <div class="toggle-box">
      <div class="toggle-panel toggle-left">
        <h1>Hello, Welcome!</h1>
        <p>Don't have an account? Register to get started with our platform.</p>
        <button class="btn register-btn">Register</button>
      </div>
      <div class="toggle-panel toggle-right">
        <h1>Welcome!!</h1>
        <p>Already have an account? Login to access your dashboard.</p>
        <button class="btn login-btn">Login</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    function createBeans() {
      const coffeeBeansBg = document.getElementById('coffeeBeansBg');
      const beanCount = 20;
      for (let i = 0; i < beanCount; i++) {
        const bean = document.createElement('div');
        bean.classList.add('coffee-bean');
        const size = Math.random() * 20 + 10;
        bean.style.width = `${size}px`;
        bean.style.height = `${size}px`;
        bean.style.left = `${Math.random() * 100}%`;
        bean.style.top = `${Math.random() * 100}%`;
        const duration = Math.random() * 20 + 10;
        bean.style.animationDuration = `${duration}s`;
        bean.style.animationDelay = `${Math.random() * 10}s`;
        bean.style.transform = `rotate(${Math.random() * 360}deg)`;
        coffeeBeansBg.appendChild(bean);
      }
    }
    document.addEventListener('DOMContentLoaded', () => {
      createBeans();
      const container = document.querySelector('.container');
      const registerBtn = document.querySelector('.register-btn');
      const loginBtn = document.querySelector('.login-btn');
      const togglePasswordIcons = document.querySelectorAll('.toggle-password');

      registerBtn.addEventListener('click', () => {
        container.classList.add('active');
      });
      loginBtn.addEventListener('click', () => {
        container.classList.remove('active');
      });
      togglePasswordIcons.forEach(icon => {
        icon.addEventListener('click', function() {
          const input = this.parentElement.querySelector('input');
          const type = input.getAttribute('type') === 'password' ? 'text' : 'password';
          input.setAttribute('type', type);
          this.classList.toggle('bxs-lock-alt');
          this.classList.toggle('bxs-lock-open');
        });
      });
      const firstInput = document.querySelector('input');
      if (firstInput) firstInput.focus();
    });
  </script>
</body>
</html>
